dist: xenial
language: minimal

git:
  quiet: true
  submodules: false

branches:
  only:
  - master
  - deploy

env:
# Carefull, also set it in the deploy section!
- NOTES_FILE=main

services:
- docker

script:
- docker run --rm -v $(pwd):/notes blang/latex /bin/bash -c "cd /notes; ./build.sh $NOTES_FILE"
- "./test.sh $NOTES_FILE"

deploy:
  provider: releases
  api_key:
    secure: POOpRUSBghprPFujro4IMR7RHWU8IHGdkwS9Qe4G7uOhYn3NVDtxohzFby38K20JkbnCFZ1BOnrmQ3g3AmSG2S/357TFqQYoJYXXL/6t5L1nyfOTPuMtNJSH907qot+EZEPJZA34JX5dlff4CwPhizigSyOJDucGai8Xw9atB7DnWXGXHCkNrocxqB9higS9dkmZkYeDqXFNetSl43kQuFo5RVvHZXnKN/Yy2QgmxrgtUA90qOlSHCiM6RNIZwLmt/sGMbRl7KaG6vjwICZ20PKRB2VclCLQlNEbevIieiC9b93BSd6k/KdoY/m61Ogk9toZO0vvcuok4BGUDrPHSYJYe0nuFb0+YJEqEDn3kFF/urPewfP6sL5C7Kr+pSm9rk5deY0nb/xRNMH+8ya8KB00wifMEu5otXfC+M1O3OJENuDtn20G2yB5+IcVS3am38sFs3wPzNQ8nXFA1vPGEWwqT+Nw0U8vMgjS2QCXLLfz7WfeYvalYXQTfZJo3Yv/1LYFq4UdbzQVyIRrAdGt3QiAKLqPwrF0RmQV7v/FTLutNWvB79tbmBl3H+4pXTF/rNcnqz5qtQNUIAJiZHXS10QXHS6VYDBquUTFq5+ZbLsj0AUItd7x0qzPhAvQTLEmaqvgYUpT7z+15fGOEVs5t7CLpdzxpVmH0GY4QgxExyk=
  file: main.pdf
  skip_cleanup: true
  on:
    repo: icl-notes/m1j2
